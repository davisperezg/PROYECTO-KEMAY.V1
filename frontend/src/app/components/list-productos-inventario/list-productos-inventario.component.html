<div class="tabs-seccion">
  <div class="search-div" >
    <mat-form-field class="search-form-field" >
      <input matInput [(ngModel)]="searchKey" placeholder="Buscar" autocomplete="off" (keyup)="applyFilterProducto()">
      <button mat-button matSuffix mat-icon-button aria-label="Clear" *ngIf="searchKey" (click)="onSearchClearProducto()">
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>
  </div>
  <div class="mat-elevation-z8" *ngIf="data==null">
    <mat-table #ProductoSort="matSort" [dataSource]="listDataProducto"  matSort>
        <ng-container matColumnDef="categoria">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Categoría </mat-header-cell>
          <mat-cell *matCellDef="let element"
          style="cursor: pointer;font-size: 12px;"> {{element.categoria}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="marca">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Marca </mat-header-cell>
          <mat-cell *matCellDef="let element"
          style="cursor: pointer;font-size: 12px;"> {{element.marca}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="tipo_producto">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Tipo </mat-header-cell>
          <mat-cell *matCellDef="let element"
          style="cursor: pointer;font-size: 12px;"> {{element.tipo_producto}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="descripcion">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Producto</mat-header-cell>
          <mat-cell *matCellDef="let element"
          style="cursor: pointer;font-size: 12px;"> {{element.descripcion}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="modelo">
          <mat-header-cell style="justify-content: center;" *matHeaderCellDef mat-sort-header> modelo </mat-header-cell>
          <mat-cell *matCellDef="let element"
          style="justify-content: center;cursor: pointer;font-size: 12px;"> {{element.modelo}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="precio">
          <mat-header-cell style="justify-content: center;" *matHeaderCellDef mat-sort-header> Precio </mat-header-cell>
          <mat-cell *matCellDef="let element"
          style="cursor: pointer;justify-content: center !important;font-size: 12px;">S/.{{element.precio}} </mat-cell>
        </ng-container>

        <!-- Name Column [class.table-active]="element == categoriaSeleccion"-->
        <ng-container matColumnDef="opciones">
          <mat-header-cell *matHeaderCellDef style="justify-content: center;"> Opciones </mat-header-cell>
          <mat-cell *matCellDef="let row" style="justify-content: center;">
              <button mat-icon-button  (click)="addProducto(row)">
                <mat-icon>check_circle</mat-icon>
              </button>
          </mat-cell>
        </ng-container>
      <ng-container matColumnDef="loading">
        <mat-footer-cell *matFooterCellDef colspan="6">
          Cargando data...
        </mat-footer-cell>
      </ng-container>
      <ng-container matColumnDef="noData">
        <mat-footer-cell *matFooterCellDef colspan="6">
          No Data.
        </mat-footer-cell>
      </ng-container>
      <mat-header-row *matHeaderRowDef="columnaProducto"></mat-header-row>
      <mat-row *matRowDef="let row; columns: columnaProducto;"></mat-row>
      <mat-footer-row *matFooterRowDef="['loading']" [ngClass]="{'hide':listDataProducto!=null}"></mat-footer-row>
      <mat-footer-row *matFooterRowDef="['noData']" [ngClass]="{'hide':!(listDataProducto!=null && listDataProducto.data.length==0)}"></mat-footer-row>

    </mat-table>
  </div>
  <div class="mat-elevation-z8" *ngIf="data!=null">
    <mat-table #ProductoSort="matSort" [dataSource]="listDataProducto"  matSort>
      <ng-container matColumnDef="id_producto">
        <mat-header-cell *matHeaderCellDef mat-sort-header> COD </mat-header-cell>
        <mat-cell *matCellDef="let element"
        style="cursor: pointer;font-size: 12px;"> {{element.id_producto}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="categoria">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Categoría </mat-header-cell>
          <mat-cell *matCellDef="let element"
          style="cursor: pointer;font-size: 12px;"> {{element.categoria}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="marca">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Marca </mat-header-cell>
          <mat-cell *matCellDef="let element"
          style="cursor: pointer;font-size: 12px;"> {{element.marca}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="tipo_producto">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Tipo </mat-header-cell>
          <mat-cell *matCellDef="let element"
          style="cursor: pointer;font-size: 12px;"> {{element.tipo_producto}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="descripcion">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Producto</mat-header-cell>
          <mat-cell *matCellDef="let element"
          style="cursor: pointer;font-size: 12px;"> {{element.descripcion}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="modelo">
          <mat-header-cell style="justify-content: center;" *matHeaderCellDef mat-sort-header> modelo </mat-header-cell>
          <mat-cell *matCellDef="let element"
          style="justify-content: center;cursor: pointer;font-size: 12px;"> {{element.modelo}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="precio">
          <mat-header-cell style="justify-content: center;" *matHeaderCellDef mat-sort-header> Precio </mat-header-cell>
          <mat-cell *matCellDef="let element"
          style="cursor: pointer;justify-content: center !important;font-size: 12px;">{{element.precio | currency:"S/"}} </mat-cell>
        </ng-container>

        <!-- Name Column [class.table-active]="element == categoriaSeleccion"-->
        <ng-container matColumnDef="opciones">
          <mat-header-cell *matHeaderCellDef style="justify-content: center;"> Opciones </mat-header-cell>
          <mat-cell *matCellDef="let row" style="justify-content: center;">
              <button mat-icon-button  (click)="addProducto(row)">
                <mat-icon>check_circle</mat-icon>
              </button>
          </mat-cell>
        </ng-container>
      <ng-container matColumnDef="loading">
        <mat-footer-cell *matFooterCellDef colspan="6">
          Cargando data...
        </mat-footer-cell>
      </ng-container>
      <ng-container matColumnDef="noData">
        <mat-footer-cell *matFooterCellDef colspan="6">
          No Data.
        </mat-footer-cell>
      </ng-container>
      <mat-header-row *matHeaderRowDef="columnaProducto"></mat-header-row>
      <mat-row *matRowDef="let row; columns: columnaProducto;"></mat-row>
      <mat-footer-row *matFooterRowDef="['loading']" [ngClass]="{'hide':listDataProducto!=null}"></mat-footer-row>
      <mat-footer-row *matFooterRowDef="['noData']" [ngClass]="{'hide':!(listDataProducto!=null && listDataProducto.data.length==0)}"></mat-footer-row>

    </mat-table>
  </div>
</div>
<mat-paginator class="mat-table-page" #MatPaginatorProducto="matPaginator" matPaginator [pageSizeOptions]="[5, 10, 25, 100]" [pageSize]="5" showFirstLastButtons ></mat-paginator>
<div class="footer-mymodal">
  <form #inventarioForm ="ngForm" (ngSubmit)="addInventario(inventarioForm)">
  <div class="footer-input" *ngIf="data==null">
    <input type="hidden" #id_producto="ngModel" [(ngModel)]="productoSeleccion.id_producto" name="id_producto">

      <mat-form-field color="warn" class="example-form-field">
                <mat-label>Producto</mat-label>
                <input matInput type="text" name="nombre" #nombre="ngModel" [(ngModel)]="productoSeleccion.descripcion" autocomplete="off">
      </mat-form-field>
      <mat-form-field color="warn" class="example-form-field" style="margin-left: 10%;">
        <mat-label>Cantidad</mat-label>
        <input matInput type="text" name="cantidad" #cantidad="ngModel" [(ngModel)]="inventarioSeleccion.cantidad" autocomplete="off">
    </mat-form-field>
  </div>
  <div class="footer-buttons" *ngIf="data==null">
    <button type="button" style="float: right;" color="warn" mat-raised-button (click)="cerrarDialog()">Cerrar</button>
    <button type="submit" style="float: right;margin-right: 20px;" mat-raised-button >Registrar</button>
  </div>
</form>
<form #productoForm ="ngForm" (ngSubmit)="addProductoProforma(productoForm)">
  <div class="footer-input" *ngIf="data!=null">
    <input type="hidden" #id_producto="ngModel" [(ngModel)]="productoSeleccion.id_producto" name="id_producto">

      <mat-form-field color="warn" class="example-form-field">
                <mat-label>Producto</mat-label>
                <input matInput type="text" name="nombre" #nombre="ngModel" [(ngModel)]="productoSeleccion.descripcion" autocomplete="off">
      </mat-form-field>
      <mat-form-field color="warn" class="example-form-field" style="margin-left: 10%;">
        <mat-label>Cantidad</mat-label>
        <input matInput type="text" name="cantidad" #cantidad="ngModel" [(ngModel)]="inventarioSeleccion.cantidad" autocomplete="off">
    </mat-form-field>
  </div>
  <div class="footer-buttons" *ngIf="data!=null">
    <button type="button" style="float: left;" color="warn" mat-raised-button (click)="cerrarDialog()">Cerrar</button>
    <button type="submit" style="float: left;margin-left: 20px;" mat-raised-button >Añadir</button>
  </div>
</form>
</div>

